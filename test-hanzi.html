<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Test area for the hanzi video project</title>
	<script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
</head>
<body>
	<input type="text" id="hanzi-input" placeholder="Hanzi">
	<button id="hanzi-updater-button">Select hanzi</button>

	<div id="div0"></div>
	<div id="div1"></div>
	<div id="div2"></div>
	<div id="div3"></div>
	
	<button id="animate-button">Animate</button>

	<script type="text/javascript">
		const hanziInput = document.getElementById("hanzi-input");

		var selectedHanzi

		document.getElementById("hanzi-updater-button").addEventListener("click", updateHanzi);

		function updateHanzi() {
			var numHanzi = Math.min(4,hanziInput.value.length) // The longest HSK words have 4 hanzi, as do chengyu

			if (numHanzi > 0) {
					document.getElementById("div0").innerHTML = "";
					selectedHanzi = hanziInput.value[0];
					var character0 = HanziWriter.create('div0', selectedHanzi, {
					width: 100,
					height: 100,
					padding: 5,
					showOutline: true
				});

					if (numHanzi > 1) {
							document.getElementById("div1").innerHTML = "";
							selectedHanzi = hanziInput.value[1];
							var character1 = HanziWriter.create('div1', selectedHanzi, {
							width: 100,
							height: 100,
							padding: 5,
							showOutline: true
						});

							if (numHanzi > 2) {
									document.getElementById("div2").innerHTML = "";
									selectedHanzi = hanziInput.value[2];
									var character2 = HanziWriter.create('div2', selectedHanzi, {
									width: 100,
									height: 100,
									padding: 5,
									showOutline: true
								});

									if (numHanzi > 3) {
											document.getElementById("div3").innerHTML = "";
											selectedHanzi = hanziInput.value[3];
											var character3 = HanziWriter.create('div3', selectedHanzi, {
											width: 100,
											height: 100,
											padding: 5,
											showOutline: true
										});
									}
							}
					}
			}
		}

		function chainAnimations() {
		  var delayBetweenAnimations = 1000; // milliseconds
		  character0.hideCharacter();
		  character1.hideCharacter();
		  character2.hideCharacter();
		  character3.hideCharacter();

		  character0.animateCharacter({
		    onComplete: function() {
		      setTimeout(function() {
		        character1.animateCharacter({
		        	onComplete: function() {
		        		setTimeout(function() {
		        			character2.animateCharacter({
		        				onComplete: function() {
		        					setTimeout(function() {
		        						character3.animateCharacter();
		        					}, delayBetweenAnimations);
		        				}
		        			});
		        		}, delayBetweenAnimations);
		        	}
		        });
		      }, delayBetweenAnimations);
		    }
		  });
		}

		document.getElementById('animate-button').addEventListener('click', chainAnimations);
	</script>
</body>
</html>